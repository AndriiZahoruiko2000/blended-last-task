{"version":3,"file":"modal-Y7jQDyqm.js","sources":["../../src/js/constants.js","../../src/js/products-api.js","../../src/js/refs.js","../../src/js/helpers.js","../../src/js/render-function.js","../../src/js/handlers.js","../../src/js/modal.js"],"sourcesContent":["export const LOCAL_STORAGE_KEY = 'Cart-Product-List';\nexport const LOCAL_STORAGE_WISHLIST_KEY = 'Wishlist-Product-List';\n","import axios from 'axios';\nconst baseURL = 'https://dummyjson.com/products';\n//!================================================\n\nexport async function getCategories() {\n  const endPoint = '/category-list';\n  const url = baseURL + endPoint;\n\n  const params = {};\n\n  const res = await axios.get(url, { params });\n  return res.data;\n}\n\n//!================================================\n\nexport async function getProducts(currentPage = 1) {\n  const endPoint = '';\n  const url = baseURL + endPoint;\n\n  const params = {\n    limit: 12,\n    skip: (currentPage - 1) * 12,\n  };\n\n  const res = await axios.get(url, { params });\n  return res.data;\n}\n\n//!================================================\n\nexport async function getProductsByCategory(category) {\n  const endPoint = `/category/${category}`;\n  const url = baseURL + endPoint;\n\n  const params = {};\n\n  const res = await axios.get(url, { params });\n  return res.data;\n}\n\n//!================================================\n\nexport async function getProductById(id) {\n  const endPoint = `/${id}`;\n  const url = baseURL + endPoint;\n\n  const params = {};\n\n  const res = await axios.get(url, { params });\n  return res.data;\n}\n","export const refs = {\n  categoryList: document.querySelector('.categories'),\n  productsList: document.querySelector('.products'),\n  divModal: document.querySelector('.modal'),\n  divModalProduct: document.querySelector('.modal-product'),\n  addToCartBtn: document.querySelector('.js-modal-product__btn--cart'),\n  cartProductsList: document.querySelector('.js-products'),\n  cartInfo: document.querySelector('.js-cart-summary__inner'),\n  closeModal: document.querySelector('.modal__close-btn'),\n  addToWishlist: document.querySelector('.js-modal-product__btn--wishlist'),\n  wishlist: document.querySelector('.wishlist-products'),\n  headerCartCount: document.querySelector('[data-cart-count]'),\n  headerWishlistCount: document.querySelector('[data-wishlist-count]'),\n};\n","export function saveToLS(key, value) {\n  const jsonData = JSON.stringify(value);\n  localStorage.setItem(key, jsonData);\n}\n\nexport function loadFromLS(key, defaultValue) {\n  const loadData = localStorage.getItem(key);\n  try {\n    const parsedData = JSON.parse(loadData);\n    return parsedData || defaultValue;\n  } catch {\n    return loadData || defaultValue;\n  }\n}\n\n//!================================================\n","import { LOCAL_STORAGE_KEY, LOCAL_STORAGE_WISHLIST_KEY } from './constants';\nimport { loadFromLS } from './helpers';\nimport { refs } from './refs';\n\n//!================================================\nexport function createTemplateCategory(category) {\n  return `<li class=\"categories__item\">\n   <button class=\"categories__btn\" type=\"button\">${category}</button>\n </li>\n`;\n}\n\nexport function createTemplateCategories(categories) {\n  return categories.map(createTemplateCategory).join('');\n}\n\n//!================================================\n\nexport function createTemplateProduct(product) {\n  return `<li class=\"products__item\" data-id=\"${product.id}\">\n    <img class=\"products__image\" src=\"${product.thumbnail}\" alt=\"\"/>\n    <p class=\"products__title\">${product.title}</p>\n    <p class=\"products__brand\">${product.brand}<span class=\"products__brand--bold\">Brand:</span></p>\n    <p class=\"products__category\">Category:${product.category} </p>\n    <p class=\"products__price\">Price: ${product.price}$</p>\n </li>\n`;\n}\n\nexport function createTemplateProducts(products) {\n  return products.map(createTemplateProduct).join('');\n}\n\n//!================================================\n\nexport function createModalByProduct(product) {\n  return `<img class=\"modal-product__img\" src=\"${product.images[0]}\" alt=\"\" />\n      <div class=\"modal-product__content\">\n        <p class=\"modal-product__title\">${product.title}</p>\n        <ul class=\"modal-product__tags\">${product.tags}</ul>\n        <p class=\"modal-product__description\">${product.description}</p>\n        <p class=\"modal-product__shipping-information\">Shipping:${product.shippingInformation}</p>\n        <p class=\"modal-product__return-policy\">Return Policy:${product.returnPolicy}</p>\n        <p class=\"modal-product__price\">Price: ${product.price}</p>\n        <button class=\"modal-product__buy-btn\" type=\"button\" data-id=\"${product.id}\">Buy</button>\n      </div>\n`;\n}\n//!================================================\nexport function renderCartInfo(products) {\n  const productLength = products.length;\n  let totalPrice = 0;\n\n  for (const product of products) {\n    totalPrice += product.price;\n  }\n\n  refs.cartInfo.querySelector('[data-count]').textContent = productLength;\n  refs.cartInfo.querySelector('[data-price]').textContent =\n    totalPrice.toFixed(2) + '$';\n}\n\n//!================================================\n\nexport const updateCartBtnText = id => {\n  let cart = loadFromLS(LOCAL_STORAGE_KEY, []);\n  if (cart.includes(id)) {\n    refs.addToCartBtn.textContent = 'Remove from Cart';\n  } else {\n    refs.addToCartBtn.textContent = 'Add to Cart';\n  }\n};\n\nexport const updateWishlistBtnText = id => {\n  let wishlist = loadFromLS(LOCAL_STORAGE_WISHLIST_KEY, []);\n  if (wishlist.includes(id)) {\n    refs.addToWishlist.textContent = 'Remove from Wishlist';\n  } else {\n    refs.addToWishlist.textContent = 'Add to Wishlist';\n  }\n};\n//!================================================\n\nexport const updateHeaderCounter = () => {\n  console.log(refs);\n  const cart = loadFromLS(LOCAL_STORAGE_KEY);\n  const wishlist = loadFromLS(LOCAL_STORAGE_WISHLIST_KEY);\n  refs.headerCartCount.textContent = cart.length;\n  refs.headerWishlistCount.textContent = wishlist.length;\n};\n","import {\n  getCategories,\n  getProductById,\n  getProducts,\n  getProductsByCategory,\n} from './products-api';\nimport { refs } from './refs';\nimport {\n  createModalByProduct,\n  createTemplateCategories,\n  createTemplateProducts,\n  updateCartBtnText,\n  updateWishlistBtnText,\n} from './render-function';\n\n//!================================================\n\nexport const initialHome = async e => {\n  const categories = await getCategories();\n  categories.unshift('All');\n\n  const markup = createTemplateCategories(categories);\n  refs.categoryList.innerHTML = markup;\n\n  const products = await getProducts();\n  const markupProducts = createTemplateProducts(products.products);\n  refs.productsList.innerHTML = markupProducts;\n};\n\n//!================================================\n\nexport const handleCategoryClick = async e => {\n  if (e.target.nodeName !== 'BUTTON') return;\n\n  const categoryBtn = e.target.textContent;\n  const response = await getProductsByCategory(categoryBtn);\n  const markupByCategoryProduct = createTemplateProducts(response.products);\n  refs.productsList.innerHTML = markupByCategoryProduct;\n};\n\n//!================================================\n\nexport const openModal = async e => {\n  const li = e.target.closest('li');\n  if (!li) return;\n  const itemId = li.dataset.id;\n\n  const response = await getProductById(itemId);\n  const markupModalContent = createModalByProduct(response);\n  refs.divModalProduct.innerHTML = markupModalContent;\n\n  refs.divModal.classList.add('modal--is-open');\n  updateCartBtnText(itemId);\n  updateWishlistBtnText(itemId);\n};\n\n//!================================================\nexport const closeModal = e => {\n  refs.divModal.classList.remove('modal--is-open');\n};\n","import { LOCAL_STORAGE_KEY, LOCAL_STORAGE_WISHLIST_KEY } from './constants';\nimport { closeModal } from './handlers';\nimport { loadFromLS, saveToLS } from './helpers';\nimport { refs } from './refs';\nimport {\n  updateCartBtnText,\n  updateHeaderCounter,\n  updateWishlistBtnText,\n} from './render-function';\n\n//!================================================\n\nlet cart = loadFromLS(LOCAL_STORAGE_KEY, []);\nlet wishlist = loadFromLS(LOCAL_STORAGE_WISHLIST_KEY, []);\n//!================================================\n\nrefs.closeModal.addEventListener('click', closeModal);\n\n//!================================================\nrefs.addToCartBtn.addEventListener('click', e => {\n  const buyButton = refs.divModalProduct.querySelector(\n    '.modal-product__buy-btn'\n  );\n\n  const productId = buyButton.dataset.id;\n  if (!cart.includes(productId)) {\n    cart.push(productId);\n    console.log('add');\n  } else {\n    cart = cart.filter(item => {\n      return item !== productId;\n    });\n    console.log('deleted');\n  }\n\n  saveToLS(LOCAL_STORAGE_KEY, cart);\n  updateCartBtnText(productId);\n  updateHeaderCounter();\n});\n\n//!================================================\n\nrefs.addToWishlist.addEventListener('click', e => {\n  const buyButton = refs.divModalProduct.querySelector(\n    '.modal-product__buy-btn'\n  );\n  const wishlistProductId = buyButton.dataset.id;\n\n  if (!wishlist.includes(wishlistProductId)) {\n    wishlist.push(wishlistProductId);\n  } else {\n    wishlist = wishlist.filter(item => {\n      return item !== wishlistProductId;\n    });\n  }\n\n  saveToLS(LOCAL_STORAGE_WISHLIST_KEY, wishlist);\n  updateWishlistBtnText(wishlistProductId);\n  updateHeaderCounter();\n});\n"],"names":["LOCAL_STORAGE_KEY","LOCAL_STORAGE_WISHLIST_KEY","baseURL","getCategories","url","params","axios","getProducts","currentPage","getProductsByCategory","category","endPoint","getProductById","id","refs","saveToLS","key","value","jsonData","loadFromLS","defaultValue","loadData","createTemplateCategory","createTemplateCategories","categories","createTemplateProduct","product","createTemplateProducts","products","createModalByProduct","renderCartInfo","productLength","totalPrice","updateCartBtnText","updateWishlistBtnText","updateHeaderCounter","cart","wishlist","initialHome","e","markup","markupProducts","handleCategoryClick","categoryBtn","response","markupByCategoryProduct","openModal","li","itemId","markupModalContent","closeModal","productId","item","wishlistProductId"],"mappings":"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"}